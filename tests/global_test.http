# global test with 3 QKS + routing and 4 QKDM, everything started empty 

POST http://keycloak:8080/auth/realms/qks/protocol/openid-connect/token HTTP/1.1 
Content-Type: application/x-www-form-urlencoded

client_id=qkstest
&client_secret=29db8d09-97f1-4e5c-8744-9e07bd4ff65a
&grant_type=password
&scope=openid
&username=sae3
&password=password

###

POST http://localhost:4001/test HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
###
# 1. register qks2 to qks1 and qks3 and vice versa
## 1.1 : register qks2 to qks1 -> qks1 mapped with 4001 
POST http://localhost:4001/api/v1/qks HTTP/1.1 
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
Content-Type: application/json

{
    "QKS_ID" : "qks2",
    "QKS_IP" : "172.18.0.182" ,
    "QKS_port" : 4000 ,
    "routing_IP" : "172.18.0.162" ,
    "routing_port" : 7000 
}


###
## 1.2 : register qks2 to qks3 -> qks3 mapped with 4003
POST http://localhost:4003/api/v1/qks HTTP/1.1 
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
Content-Type: application/json

{
    "QKS_ID" : "qks2",
    "QKS_IP" : "172.18.0.182" ,
    "QKS_port" : 4000 ,
    "routing_IP" : "172.18.0.162" ,
    "routing_port" : 7000  
}

###
## 1.3 : register qks3 to qks2 -> qks2 mapped with 4002
POST http://localhost:4002/api/v1/qks HTTP/1.1 
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
Content-Type: application/json

{
    "QKS_ID" : "qks3",
    "QKS_IP" : "172.18.0.183" ,
    "QKS_port" : 4000 ,
    "routing_IP" : "172.18.0.163" ,
    "routing_port" : 7000  
}


###
## 1.4 : register qks1 to qks2 -> qks2 mapped with 4002
POST http://localhost:4002/api/v1/qks HTTP/1.1 
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
Content-Type: application/json

{
    "QKS_ID" : "qks1",
    "QKS_IP" : "172.18.0.181" ,
    "QKS_port" : 4000 ,
    "routing_IP" : "172.18.0.161" ,
    "routing_port" : 7000  
}


###


# 2. register 2 SAEs to each qks
## 2.1 : register sae1 to qks1 
POST http://localhost:4001/api/v1/saes HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
Content-Type: application/json

{ "id" : "sae1" }


###
## 2.2 : register sae2 to qks2
POST http://localhost:4002/api/v1/saes HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
Content-Type: application/json

{ "id" : "sae2" }


###
## 2.3 : register sae3 to qks3
POST http://localhost:4003/api/v1/saes HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
Content-Type: application/json

{ "id" : "sae3" }



###



# 3. register qkdm1 to qks1, qkdm2a and qkdm2b to qks2, qkdm3 to qks3
## 3.1 : register qkdm1 to qks1 -> qkdm1 mapped with 5001
POST http://localhost:5001/api/v1/qkdm/actions/attach HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
content-type: application/json

{
    "qks_src_IP" : "172.18.0.181",
    "qks_src_port" : 4000,
    "qks_src_ID" : "qks1",
    "qks_dest_ID" : "qks2"
}

###
## 3.2 : register qkdm3 to qks3 -> qkdm3 mapped with 5003
POST http://localhost:5003/api/v1/qkdm/actions/attach HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
content-type: application/json

{
    "qks_src_IP" : "172.18.0.183",
    "qks_src_port" : 4000,
    "qks_src_ID" : "qks3",
    "qks_dest_ID" : "qks2"
}

###
## 3.3 : register qkdm2a to qks2 -> qkdm2a mapped with 5002
POST http://localhost:5002/api/v1/qkdm/actions/attach HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
content-type: application/json

{
    "qks_src_IP" : "172.18.0.182",
    "qks_src_port" : 4000,
    "qks_src_ID" : "qks2",
    "qks_dest_ID" : "qks1"
}

###
## 3.4 : register qkdm2b to qks2 -> qkdm2b mapped with 5000
POST http://localhost:5000/api/v1/qkdm/actions/attach HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg
content-type: application/json

{
    "qks_src_IP" : "172.18.0.182",
    "qks_src_port" : 4000,
    "qks_src_ID" : "qks2",
    "qks_dest_ID" : "qks3"
}

###


# 4. start streams for qkdm1-qkdm2a and qkdm2b-qkdm3 
## 4.1 : start stream qkdm1-qkdm2a posting request to qks1 
POST http://localhost:4001/api/v1/qkdms/qkdm1/streams HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg


###
## 4.2 : start stream qkdm2b-qkdm3 posting request to qks3 
POST http://localhost:4003/api/v1/qkdms/qkdm3/streams HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNTcyNTMsImlhdCI6MTYzNDEyMTI1MywianRpIjoiYTg2NDM2ZjAtNzEzMi00NTkyLTg4YjctNGYwODZiNjJjZjJmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdlYWViYjkxLTA1ODQtNGYyMS05NmQxLTUwZDA3ZjI1MzFkNSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZTdmNTViZGYtOWU4MC00MDc2LWE2NzYtMDFiZWU3YTQ3YTNiIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4ifQ.VY6I6tQH5-8VO3tYBnob5rxabRrGV9lEMDSMeKirDV09PnE67H03Z9dGSQ3NXKM3aE0rQr9pDEX23nbKp1GXNDru0_QXBYfRfxdD0WZqRw39uTFUxBKQ0GHZH-yPAqWgUKjMESjgnw9I-qFMo8HtxWrfH5sHXB7D5is_SoW65erqZzSuNuli8dqrjQ1LrZ2fvEAMw2hm36Sj3cQhs_rsyFr1BhuF3RcF6Y0FZVsNb2YUxBHAQNNn9Fm7eO9N_dKZNJMIMpsozu1sVlts3ZHP4u9T7LJjukukaN93BsI1rCVM-QH9cz1z5M6tXRYpZMClAeqHzQCWOMWQMrMNb67Mxg


###


# 5. test getKey and getKeyWithKeyID between qks1 and qks2  
## 5.1 : getStatus to qks1 from sae1 to sae2
GET http://localhost:4001/api/v1/keys/sae2/status HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNjE5NTEsImlhdCI6MTYzNDEyNTk1MSwianRpIjoiMmRjMWMzNmQtZjJlMS00YmFmLWJmMzUtMjlkMmQxYmNkMDdmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjVjMGZhNzM2LWQ0YzItNDgxYS05YTFkLTM1YzM2ODBlZWQ0ZSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiMzEwYTNiYTktMTFlNC00N2E3LWFmYzctOGMxNDAzMTA3Y2I2IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInNhZSIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInByZWZlcnJlZF91c2VybmFtZSI6InNhZTEifQ.f67RYrXnGhRKrRTIWAO6XdN1G2lFI6rFlWdZbWJrjUAZaeiKorofO9Ti4nAckCorCj3KZJwbI6UEV9WsML_AoeXgVE_J03e37CsbWKCUBOtjrEAdAl6IBbMez_7bjB_Z5kRhQiQFFWGqw092NMMTf4lhE4-YaHjQfUHP57di1iB8n9CjNbPbmxLte3V1qAFZuqFVuNkUF84zzUho6ylVze6oeV_xFg309jAod3Cfd-EcSLB48qmqvJwS0qUU0RWKfMhiPNHS--fPxgMetIfb0MW1zkM-1AJG3IVqvT2fcV_U31xMLej5fztum_38934ovZDUFIUHgBQJLkNI01UNpg
###
## 5.2 : sae1 call getKey to qks1 with slave_sae = sae2 
POST http://localhost:4001/api/v1/keys/sae2/enc_keys HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNjI0MzUsImlhdCI6MTYzNDEyNjQzNSwianRpIjoiMTdhNWU1ZGEtNGIxYy00ZjRmLTlmNWItNzBkY2ZkOGUwZDc1IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjVjMGZhNzM2LWQ0YzItNDgxYS05YTFkLTM1YzM2ODBlZWQ0ZSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiYzUwYjcwZDMtMGY5NC00YzA0LWJjNTgtNTk3ODcwOTMxNWYxIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInNhZSIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInByZWZlcnJlZF91c2VybmFtZSI6InNhZTEifQ.O0LoTd5qNIY8reh8P_EGwBuF9MsrU1qgiIrQIoz842Uh5HThT_NcFDXF0xyHcLV87WZpts3OVatdhgY-IcGSBdqiB7xRy_mdlBf05f1YZ1WxXBT4bnyRKafDfnnHVdjlUE-4NP5YbqwKebvZnsbh89OCSLMz-HSitu5nFgJ0vg7GEsl1Ecs8wIQk1nOeaWGZ04A74tusIcJANYT5_0cqE8h6VS6D_a-tTi6Eu5AR4520VFv38M14k1BGIH9kOqp2sn2mvSgS6b2mJbPQxgiOY84ZlthSmch8uBL3quwtrFMgkXZJkq6R6qxXEaf2AbjIW4Up4nKH8jhNcxQBTp8n4Q
content-type: application/json

{
    "size" : 128, 
    "number" : 2
}

### 
## 5.3 : sae2 call getKeyWithKeyIDs to qks2 with keyIDs got in 5.2
POST http://localhost:4002/api/v1/keys/sae1/dec_keys HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNjI3NzksImlhdCI6MTYzNDEyNjc3OSwianRpIjoiMWQxOGIwY2YtNTYyOC00MWFlLWJkYzYtODNiNzVlNGY1ZTQxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjE1YWY2NGVmLTJhYzctNGQxNi1iZGRkLTM5ZTNmOTY1ZTJkZiIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiMDgxN2NjNTEtZTg1Yi00NjlkLWEyYjItMTk0ZDE2MWEwYWJjIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInNhZSIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInByZWZlcnJlZF91c2VybmFtZSI6InNhZTIifQ.TVf5HTnZi9aNShF_qH-8vlGJeULiktmyhlYHyRJ3NhDEJOMG7K0zNK_lnQWNAPJuA8FJDh3nY0DO1U6JQLrRdkeUI397L2YCaHOuNkmReDTjYXegHlKWMQDVTSA5SkuODoofQNufEQjUPYce9FVcJPPEI7Lah4x1YeW1lq9KAx56GAmCHMO9mcZ-EfvMDvuyzpagIMpw0r5jrPI2PpQg0pmeG6lpy88YF1UseodEORs-e7bWyfF2VT9octkazi2nyoYhL8FynZiiZ1HULL9OZvwnukIbv403Jfg8QxeWZ_8cFvmmadhXJT0uKAnom79lVSymXd0FzZQY_QsHn6SOxg
content-type: application/json

{
    "key_IDs" : ["30e842d2-56cb-4bf9-8c31-27f8f2f5ace3", "8c636cc3-5ccf-4cf5-bebe-c36cb719f270"]
}

###
# 6. test get key over a multi-hop path 
# 6.1 : call getStatus from sae1 to qks1 for sae3 
GET http://localhost:4001/api/v1/keys/sae3/status HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNjE5NTEsImlhdCI6MTYzNDEyNTk1MSwianRpIjoiMmRjMWMzNmQtZjJlMS00YmFmLWJmMzUtMjlkMmQxYmNkMDdmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjVjMGZhNzM2LWQ0YzItNDgxYS05YTFkLTM1YzM2ODBlZWQ0ZSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiMzEwYTNiYTktMTFlNC00N2E3LWFmYzctOGMxNDAzMTA3Y2I2IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInNhZSIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInByZWZlcnJlZF91c2VybmFtZSI6InNhZTEifQ.f67RYrXnGhRKrRTIWAO6XdN1G2lFI6rFlWdZbWJrjUAZaeiKorofO9Ti4nAckCorCj3KZJwbI6UEV9WsML_AoeXgVE_J03e37CsbWKCUBOtjrEAdAl6IBbMez_7bjB_Z5kRhQiQFFWGqw092NMMTf4lhE4-YaHjQfUHP57di1iB8n9CjNbPbmxLte3V1qAFZuqFVuNkUF84zzUho6ylVze6oeV_xFg309jAod3Cfd-EcSLB48qmqvJwS0qUU0RWKfMhiPNHS--fPxgMetIfb0MW1zkM-1AJG3IVqvT2fcV_U31xMLej5fztum_38934ovZDUFIUHgBQJLkNI01UNpg

###
## 6.2 : sae1 call getKey to qks1 with slave_sae = sae3
POST http://localhost:4001/api/v1/keys/sae3/enc_keys HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNjE5NTEsImlhdCI6MTYzNDEyNTk1MSwianRpIjoiMmRjMWMzNmQtZjJlMS00YmFmLWJmMzUtMjlkMmQxYmNkMDdmIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjVjMGZhNzM2LWQ0YzItNDgxYS05YTFkLTM1YzM2ODBlZWQ0ZSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiMzEwYTNiYTktMTFlNC00N2E3LWFmYzctOGMxNDAzMTA3Y2I2IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInNhZSIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInByZWZlcnJlZF91c2VybmFtZSI6InNhZTEifQ.f67RYrXnGhRKrRTIWAO6XdN1G2lFI6rFlWdZbWJrjUAZaeiKorofO9Ti4nAckCorCj3KZJwbI6UEV9WsML_AoeXgVE_J03e37CsbWKCUBOtjrEAdAl6IBbMez_7bjB_Z5kRhQiQFFWGqw092NMMTf4lhE4-YaHjQfUHP57di1iB8n9CjNbPbmxLte3V1qAFZuqFVuNkUF84zzUho6ylVze6oeV_xFg309jAod3Cfd-EcSLB48qmqvJwS0qUU0RWKfMhiPNHS--fPxgMetIfb0MW1zkM-1AJG3IVqvT2fcV_U31xMLej5fztum_38934ovZDUFIUHgBQJLkNI01UNpg
content-type: application/json

{
    "size" : 128, 
    "number" : 2
}

###
## 6.3 : sae3 call getKey to qks3 with master_sae = sae1 with keys got in 6.2
POST http://localhost:4003/api/v1/keys/sae1/dec_keys HTTP/1.1
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmLWc1MFh4Y3FrWllWb0lFSHUteDNzZjFwa3lna3A4Y2FxRTlhREZnQnF3In0.eyJleHAiOjE2MzQxNzIyNjMsImlhdCI6MTYzNDEzNjI2MywianRpIjoiOGU4NTBmZmItZmJjMS00MjQzLTgxZTYtYTc1MGMxODUyOGZkIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrOjgwODAvYXV0aC9yZWFsbXMvcWtzIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImRiYjY3NzQ0LWQ2NTAtNDFmZS1iNjY3LTQ3YWE0YTRkYTEyOSIsInR5cCI6IkJlYXJlciIsImF6cCI6InFrc3Rlc3QiLCJzZXNzaW9uX3N0YXRlIjoiZDEzNDAyOWUtNjYwOS00NmI2LWI3MDItYjU4M2MzZTY4OWM2IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3d3dy5rZXljbG9hay5vcmciXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInNhZSIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInByZWZlcnJlZF91c2VybmFtZSI6InNhZTMifQ.XL8yq5gX2Ifh3i9f-T0LS_CmkiN_7jVKTVOrWy6cgNaX-GSXnAmABxpcv9ahXzJ8HCF703mZFfRUPxXd7n65Qc8XHIOykrz774mPYRGavo7c8qJEgCTO45wtZYqvLGAPiQmT6jaHtUu3WYszN0z1c7O_FFuqnmoCB-hkY8A-f2fa0e6AL3xqiYnW4zDfufd63Fgu8bt2SbhFwlkoJyKx7waiwmh7YyrgPdhtParGPcGvPVIyecTY28mcvj8oZnXJpyqwlyuIY-vofSgYjgL_C0w-UHh_I0GudJEEhJwa13fVUPfFfcrn511TmzrFbXGkZs74w2_z6eigOQy5y2OySg
content-type: application/json

{
    "key_IDs" : ["76547fc6-1bcb-4f26-94d9-04bf72302302", "33c0e59e-4811-49c8-85a0-05f6f8c8b27a"]
}
